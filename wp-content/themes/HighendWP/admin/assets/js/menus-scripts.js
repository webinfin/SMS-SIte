!function(e){"use strict";function a(){var a,m;e(document.body).on("click.hbOpenMediaManager",".hb-open-media",function(n){return n.preventDefault(),m=this.id.replace("hb-media-upload-",""),a?void a.open():(a=wp.media.frames.hbMediaFrame=wp.media({className:"media-frame hb-media-frame",frame:"select",multiple:!1,library:{type:"image"}}),a.on("select",function(){var n=a.state().get("selection").first().toJSON();e("#edit-menu-item-megamenu-background-"+m).val(n.url),e("#hb-media-img-"+m).attr("src",n.url).css("display","block")}),void a.open())})}e(document).ready(function(){m.menu_item_mouseup(),m.megamenu_status_update(),m.update_megamenu_fields(),e(".remove-hb-megamenu-background").manage_thumbnail_display(),e(".hb-megamenu-background-image").css("display","block"),e(".hb-megamenu-background-image[src='']").css("display","none"),a()});var m={menu_item_mouseup:function(){e(document).on("mouseup",".menu-item-bar",function(a){e(a.target).is("a")||setTimeout(m.update_megamenu_fields,300)})},megamenu_status_update:function(){e(document).on("click",".edit-menu-item-hb-megamenu-check",function(){var a=e(this).parents(".menu-item:eq( 0 )");e(this).is(":checked")?a.addClass("hb-megamenu"):a.removeClass("hb-megamenu"),m.update_megamenu_fields()})},update_megamenu_fields:function(){var a=e(".menu-item");a.each(function(m){var n=e(".edit-menu-item-hb-megamenu-check",this);if(e(this).is(".menu-item-depth-0"))n.attr("checked")&&e(this).addClass("hb-megamenu");else{var t=a.filter(":eq("+(m-1)+")");t.is(".hb-megamenu")?(n.attr("checked","checked"),e(this).addClass("hb-megamenu")):(n.attr("checked",""),e(this).removeClass("hb-megamenu"))}})}};e.fn.manage_thumbnail_display=function(){var a;return this.click(function(m){m.preventDefault(),a=this.id.replace("hb-media-remove-",""),e("#edit-menu-item-megamenu-background-"+a).val(""),e("#hb-media-img-"+a).attr("src","").css("display","none")})}}(jQuery);